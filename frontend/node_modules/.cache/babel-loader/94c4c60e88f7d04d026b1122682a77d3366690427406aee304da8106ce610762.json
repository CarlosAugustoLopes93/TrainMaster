{"ast":null,"code":"import React,{useState}from'react';import'bootstrap/dist/css/bootstrap.min.css';import axios from'axios';import{useNavigate}from'react-router-dom';// Importando useNavigate\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[credentials,setCredentials]=useState({email:'',password:''});const[errorMessage,setErrorMessage]=useState('');const navigate=useNavigate();// Inicializando o useNavigate\nconst handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();console.log('Credenciais enviadas:',credentials);// Log das credenciais enviadas\ntry{const response=await axios.post('http://localhost:5000/api/auth/login',credentials);console.log('Resposta da API:',response.data);// Log da resposta recebida\nalert(response.data.message);// Exibe mensagem de sucesso\nlocalStorage.setItem('token',response.data.token);// Armazenando o token no localStorage\n// Verificando o tipo de usuário (user_type) e redirecionando\nif(response.data.user_type==='treinador'){navigate('/treinador-dashboard');// Usando navigate para redirecionar\n}else if(response.data.user_type==='aluno'){navigate('/aluno-dashboard');// Usando navigate para redirecionar\n}else{alert('Tipo de usuário inválido');}}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Erro ao fazer login:',error);// Log do erro completo\nconsole.error('Detalhes do erro:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);// Detalhes da resposta da API, se disponíveis\nsetErrorMessage(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Erro ao fazer login');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-4 text-success\",children:\"Login\"}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Email\",value:credentials.email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",placeholder:\"Senha\",value:credentials.password,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success w-100\",children:\"Entrar\"})]})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","credentials","setCredentials","email","password","errorMessage","setErrorMessage","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","console","log","response","post","data","alert","message","localStorage","setItem","token","user_type","error","_error$response","_error$response2","_error$response2$data","className","children","onSubmit","type","placeholder","onChange","required"],"sources":["C:/Users/augus/OneDrive/Documentos/TrainMaster/trainmaster/frontend/src/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom'; // Importando useNavigate\r\n\r\nconst LoginPage = () => {\r\n  const [credentials, setCredentials] = useState({ email: '', password: '' });\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const navigate = useNavigate(); // Inicializando o useNavigate\r\n\r\n  const handleChange = (e) => {\r\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    console.log('Credenciais enviadas:', credentials); // Log das credenciais enviadas\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/auth/login', credentials);\r\n\r\n      console.log('Resposta da API:', response.data); // Log da resposta recebida\r\n\r\n      alert(response.data.message); // Exibe mensagem de sucesso\r\n      localStorage.setItem('token', response.data.token); // Armazenando o token no localStorage\r\n\r\n      // Verificando o tipo de usuário (user_type) e redirecionando\r\n      if (response.data.user_type === 'treinador') {\r\n        navigate('/treinador-dashboard'); // Usando navigate para redirecionar\r\n      } else if (response.data.user_type === 'aluno') {\r\n        navigate('/aluno-dashboard'); // Usando navigate para redirecionar\r\n      } else {\r\n        alert('Tipo de usuário inválido');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao fazer login:', error); // Log do erro completo\r\n      console.error('Detalhes do erro:', error.response?.data); // Detalhes da resposta da API, se disponíveis\r\n      setErrorMessage(error.response?.data?.message || 'Erro ao fazer login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h1 className=\"text-center mb-4 text-success\">Login</h1>\r\n      {errorMessage && <div className=\"alert alert-danger\">{errorMessage}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group mb-3\">\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            value={credentials.email}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group mb-3\">\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"password\"\r\n            placeholder=\"Senha\"\r\n            value={credentials.password}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-success w-100\">Entrar</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}